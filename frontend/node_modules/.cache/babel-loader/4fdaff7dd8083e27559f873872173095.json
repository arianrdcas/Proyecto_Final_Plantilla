{"ast":null,"code":"const getState = _ref => {\n  let {\n    getStore,\n    getActions,\n    setStore\n  } = _ref;\n  return {\n    store: {\n      name: \"\",\n      emailuser: \"\",\n      password: \"\",\n      error: null,\n      isAuth: false,\n      nombre: \"\",\n      descripcion: \"\",\n      autor: \"\",\n      value: null,\n      currentUser: [],\n      proyectos: [],\n      modal: false,\n      beliminar: false,\n      bmodifica: false\n    },\n    actions: {\n      isAuthenticated: () => {\n        if (sessionStorage.getItem(\"isAuth\")) {\n          setStore({\n            isAuth: sessionStorage.getItem(\"isAuth\"),\n            currentUser: JSON.parse(sessionStorage.getItem(\"currentUser\"))\n          });\n        }\n      },\n      registro: () => {\n        setStore({\n          modal: true\n        });\n      },\n      changeCheckBox: () => {\n        setStore({\n          beliminar: true,\n          bmodifica: true\n        });\n      },\n      register: e => {\n        e.preventDefault();\n        const {\n          name,\n          emailuser,\n          password\n        } = getStore();\n        const dataUser = {\n          name: name,\n          emailuser: emailuser,\n          password: password\n        };\n        console.log(dataUser);\n        fetch(\"http://127.0.0.1:5000/api/users/register\", {\n          method: \"POST\",\n          headers: {\n            \"Content-type\": \"application/json\"\n          },\n          body: JSON.stringify(dataUser)\n        })\n        /*  .then((resp) => resp.json())\r\n         .then((resp) => console.log(resp))\r\n         .then((response) => console.log(response))\r\n         .then((response) => {\r\n           console.log(response)\r\n           setStore({\r\n             name:\"\",\r\n             password: \"\",\r\n             modal: true,\r\n           });\r\n         })\r\n         .catch(error => alert(error.msg)); */\n        .then(response => {\n          if (response.ok) {\n            console.log(response);\n            setStore({\n              name: \"\",\n              password: \"\",\n              modal: true\n            });\n          } else throw new Error('El usuario ya existe');\n        }).catch(error => console.log(error));\n        e.target.reset();\n      },\n      irHome: (e, history) => {\n        history.push('/');\n      },\n      handleChange: e => {\n        setStore({\n          [e.target.name]: e.target.value\n        });\n      },\n      handleLogin: async (e, history) => {\n        e.preventDefault();\n\n        try {\n          const {\n            name,\n            password\n          } = getStore();\n          const datos = {\n            name: name,\n            password: password\n          }; //console.log(datos);\n\n          const resp = await fetch(\"http://127.0.0.1:5000/api/users/login\", {\n            method: \"POST\",\n            body: JSON.stringify(datos),\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          const infoUser = await resp.json();\n\n          if (infoUser.msg) {\n            setStore({\n              name: \"\",\n              password: \"\",\n              error: infoUser.msg\n            });\n          } else {\n            setStore({\n              name: \"\",\n              password: \"\",\n              error: null,\n              currentUser: infoUser,\n              isAuth: true\n            });\n            sessionStorage.setItem(\"isAuth\", true);\n            sessionStorage.setItem(\"currentUser\", JSON.stringify(infoUser));\n            history.push('/');\n          }\n        } catch (error) {\n          setStore({\n            error: error.message\n          });\n        }\n      },\n      insertarProyecto: (e, history) => {\n        e.preventDefault();\n        const {\n          nombre,\n          descripcion,\n          autor\n        } = getStore();\n        const dataForm = {\n          nombre: nombre,\n          descripcion: descripcion,\n          autor: autor\n        };\n        console.log(dataForm);\n        fetch(\"http://127.0.0.1:5000/api/proyectos/register\", {\n          method: \"POST\",\n          body: JSON.stringify(dataForm),\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(response => console.log(response)).then(response => {\n          console.log(response);\n          setStore({\n            nombre: \"\",\n            descripcion: \"\",\n            autor: \"\",\n            modal: true\n          });\n        }).catch(error => console.error(error));\n      },\n      irListadoProyecto: (e, history) => {\n        setStore({\n          modal: false,\n          beliminar: false,\n          bmodifica: false\n        });\n        fetch(\"http://127.0.0.1:5000/api/proyectos\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(resp => resp.json()).then(response => {\n          console.log(response);\n          setStore({\n            proyectos: response\n          });\n        }).catch(error => console.log(error));\n        history.push(\"/verproyecto\");\n      },\n      fetchProyecto: () => {\n        fetch(\"http://127.0.0.1:5000/api/proyectos\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(resp => resp.json()).then(response => {\n          setStore({\n            proyectos: response\n          });\n        }).catch(error => console.log(error));\n      },\n      fetchOneProyecto: id => {\n        var idproyect = id;\n        fetch(`http://127.0.0.1:5000/api/proyecto/${idproyect}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(resp => resp.json()).then(response => {\n          setStore({\n            proyectos: response,\n            nombre: response[0].nombre,\n            descripcion: response[0].descripcion,\n            autor: response[0].autor\n          });\n        }).catch(error => console.log(error));\n      },\n      logout: history => {\n        sessionStorage.clear();\n        setStore({\n          isAuth: false,\n          currentUser: []\n        });\n        history.push(\"/\");\n      },\n      editar_proyecto: (e, id, history) => {\n        console.log(\"estoy en flux\");\n        e.preventDefault();\n        var idproyect = parseInt(id);\n        const {\n          nombre,\n          descripcion,\n          autor\n        } = getStore();\n        const dataFormUpdate = {\n          nombre: nombre,\n          descripcion: descripcion,\n          autor: autor\n        };\n        console.log(dataFormUpdate);\n        fetch(`http://127.0.0.1:5000/api/proyectos/editar/${idproyect}`, {\n          method: \"PUT\",\n          body: JSON.stringify(dataFormUpdate),\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(response => console.log(response));\n        setStore({\n          modal: true,\n          nombre: \"\",\n          descripcion: \"\",\n          autor: \"\"\n        }).catch(error => console.error(error));\n      },\n      delete_proyecto: (id, history) => {\n        var idproyect = parseInt(id);\n        fetch(`http://127.0.0.1:5000/api/proyectos/delete/${idproyect}`, {\n          method: 'DELETE',\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        }).then(resp => resp.json()).then(response => {\n          console.log(response);\n          setStore({\n            proyectos: response,\n            modal: true\n          });\n        }).catch(error => console.log(error));\n      }\n    }\n  };\n};\n\nexport default getState;","map":{"version":3,"sources":["D:/ProyectosArian/Trabajo_Final_agosto/frontend/src/store/flux.js"],"names":["getState","getStore","getActions","setStore","store","name","emailuser","password","error","isAuth","nombre","descripcion","autor","value","currentUser","proyectos","modal","beliminar","bmodifica","actions","isAuthenticated","sessionStorage","getItem","JSON","parse","registro","changeCheckBox","register","e","preventDefault","dataUser","console","log","fetch","method","headers","body","stringify","then","response","ok","Error","catch","target","reset","irHome","history","push","handleChange","handleLogin","datos","resp","infoUser","json","msg","setItem","message","insertarProyecto","dataForm","irListadoProyecto","fetchProyecto","fetchOneProyecto","id","idproyect","logout","clear","editar_proyecto","parseInt","dataFormUpdate","delete_proyecto"],"mappings":"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","sourcesContent":["const getState = ({ getStore, getActions, setStore }) => {\r\n  return {\r\n    store: {\r\n      name: \"\",\r\n      emailuser: \"\",\r\n      password: \"\",\r\n      error: null,\r\n      isAuth: false,\r\n      nombre: \"\",\r\n      descripcion: \"\",\r\n      autor: \"\",\r\n      value:null,\r\n      currentUser: [],\r\n      proyectos:[],\r\n      modal: false,\r\n      beliminar: false,\r\n      bmodifica: false\r\n\r\n    },\r\n\r\n    actions: {\r\n      isAuthenticated: () => {\r\n        if (sessionStorage.getItem(\"isAuth\")) {\r\n          setStore({\r\n            isAuth: sessionStorage.getItem(\"isAuth\"),\r\n            currentUser: JSON.parse(sessionStorage.getItem(\"currentUser\")),\r\n          });\r\n        }\r\n      },\r\n\r\n      registro:()=>{\r\n        setStore({\r\n          modal: true,\r\n        });\r\n      },\r\n\r\n      changeCheckBox:()=>{\r\n        setStore({\r\n          beliminar: true,\r\n          bmodifica:true\r\n        });\r\n      },\r\n\r\n      register: (e) => {\r\n        e.preventDefault();\r\n          const { name, emailuser, password } = getStore();\r\n          const dataUser = {\r\n            name: name,\r\n            emailuser: emailuser,\r\n            password: password,\r\n          };\r\n          console.log(dataUser);\r\n          fetch(\"http://127.0.0.1:5000/api/users/register\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-type\": \"application/json\" },\r\n            body: JSON.stringify(dataUser),\r\n          })\r\n           /*  .then((resp) => resp.json())\r\n            .then((resp) => console.log(resp))\r\n            .then((response) => console.log(response))\r\n            .then((response) => {\r\n              console.log(response)\r\n              setStore({\r\n                name:\"\",\r\n                password: \"\",\r\n                modal: true,\r\n              });\r\n            })\r\n            .catch(error => alert(error.msg)); */\r\n\r\n          .then((response) => {\r\n            if(response.ok){\r\n              console.log(response)\r\n              setStore({\r\n                name:\"\",\r\n                password: \"\",\r\n                modal: true,\r\n              });\r\n            }else\r\n            throw new Error('El usuario ya existe')\r\n          })\r\n          .catch(error => console.log(error));\r\n          e.target.reset();\r\n      },\r\n\r\n      irHome:(e,history)=>{\r\n        history.push('/')\r\n      },\r\n\r\n\r\n      handleChange: (e) => {\r\n        setStore({\r\n          [e.target.name]: e.target.value,  \r\n        })\r\n        \r\n      },\r\n\r\n      handleLogin: async (e, history) => {\r\n        e.preventDefault();\r\n        try {\r\n          const { name, password } = getStore();\r\n          const datos = { name: name, password: password };\r\n          //console.log(datos);\r\n          const resp = await fetch(\"http://127.0.0.1:5000/api/users/login\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(datos),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n          const infoUser = await resp.json();\r\n          if (infoUser.msg) {\r\n            setStore({\r\n              name:\"\",\r\n              password: \"\",\r\n              error: infoUser.msg,\r\n            });\r\n          } else {\r\n            setStore({\r\n              name: \"\",\r\n              password: \"\",\r\n              error: null,\r\n              currentUser: infoUser,\r\n              isAuth: true,\r\n            });\r\n            sessionStorage.setItem(\"isAuth\", true);\r\n            sessionStorage.setItem(\"currentUser\", JSON.stringify(infoUser));\r\n            history.push('/')\r\n          }\r\n        } catch (error) {\r\n          setStore({\r\n            error: error.message,\r\n          });\r\n        }\r\n      },\r\n\r\n      insertarProyecto: (e, history) => {\r\n        e.preventDefault();\r\n        const { nombre, descripcion, autor } = getStore();\r\n        const dataForm = {\r\n          nombre: nombre,\r\n          descripcion: descripcion,\r\n          autor: autor,\r\n        }\r\n        console.log(dataForm);\r\n        fetch(\"http://127.0.0.1:5000/api/proyectos/register\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(dataForm),\r\n          headers: { \"Content-type\": \"application/json\" },\r\n        })\r\n          .then((resp) => resp.json())\r\n          .then((response) => console.log(response))\r\n          .then((response) => {\r\n            console.log(response)\r\n            setStore({\r\n              nombre:\"\",\r\n              descripcion:\"\",\r\n              autor:\"\",\r\n              modal: true,\r\n            });\r\n          })\r\n          .catch((error) => console.error(error));    \r\n      },\r\n\r\n      irListadoProyecto:(e,history)=>{\r\n        setStore({modal:false, beliminar:false,  bmodifica: false})\r\n\r\n        fetch(\"http://127.0.0.1:5000/api/proyectos\",{\r\n          method:'GET',\r\n          headers :{\r\n            'Content-Type' : 'application/json'\r\n          }})\r\n            .then((resp) => resp.json())\r\n            .then((response) => {\r\n              console.log(response)\r\n              setStore({proyectos:response\r\n              })\r\n            })\r\n            .catch(error => console.log(error)); \r\n        history.push(\"/verproyecto\")\r\n      },\r\n\r\n      fetchProyecto: () => {\r\n        fetch(\"http://127.0.0.1:5000/api/proyectos\",{\r\n          method:'GET',\r\n          headers :{\r\n            'Content-Type' : 'application/json'\r\n          }})\r\n            .then((resp) => resp.json())\r\n            .then((response) => {\r\n              setStore({proyectos:response\r\n              })\r\n            })\r\n            .catch(error => console.log(error)); \r\n      }, \r\n\r\n      fetchOneProyecto: (id) => {\r\n        var idproyect = id\r\n        fetch(`http://127.0.0.1:5000/api/proyecto/${idproyect}`,{\r\n          method:'GET',\r\n          headers :{\r\n            'Content-Type' : 'application/json'\r\n          }})\r\n            .then((resp) => resp.json())\r\n            .then((response) => {\r\n              setStore({\r\n                proyectos:response,\r\n                nombre: response[0].nombre,\r\n                descripcion:response[0].descripcion,\r\n                autor: response[0].autor,\r\n              });\r\n            })\r\n            .catch(error => console.log(error));  \r\n      }, \r\n\r\n      logout:(history)=>{\r\n        sessionStorage.clear()\r\n        setStore({isAuth:false, currentUser:[]})\r\n        history.push(\"/\")\r\n      },\r\n\r\n      editar_proyecto: (e, id, history) => {\r\n        console.log(\"estoy en flux\");\r\n        e.preventDefault();\r\n        var idproyect = parseInt(id)\r\n        const { nombre, descripcion, autor } = getStore();\r\n        const dataFormUpdate = {\r\n          nombre: nombre,\r\n          descripcion: descripcion,\r\n          autor: autor,\r\n        };\r\n        console.log(dataFormUpdate);\r\n        fetch(`http://127.0.0.1:5000/api/proyectos/editar/${idproyect}`, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(dataFormUpdate),\r\n          headers: { \"Content-type\": \"application/json\" },\r\n        })\r\n          .then((resp) => resp.json())\r\n          .then((response) => console.log(response))\r\n          setStore({\r\n            modal: true,\r\n            nombre:\"\",\r\n            descripcion:\"\",\r\n            autor:\"\"\r\n          })\r\n          .catch((error) => console.error(error));\r\n      },  \r\n\r\n      delete_proyecto: (id,history) =>{\r\n        var idproyect = parseInt(id)\r\n        fetch(`http://127.0.0.1:5000/api/proyectos/delete/${idproyect}`, {\r\n          method: 'DELETE',\r\n          headers: { \"Content-type\": \"application/json\" },\r\n        })\r\n        .then((resp) => resp.json())\r\n        .then((response) => {\r\n          console.log(response)\r\n          setStore({ proyectos:response, modal: true})\r\n        })\r\n        .catch(error => console.log(error));\r\n      }, \r\n\r\n    },\r\n  };\r\n};\r\n\r\nexport default getState;"]},"metadata":{},"sourceType":"module"}