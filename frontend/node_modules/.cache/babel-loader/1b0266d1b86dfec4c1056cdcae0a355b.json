{"ast":null,"code":"const getState = _ref => {\n  let {\n    getStore,\n    getActions,\n    setStore\n  } = _ref;\n  return {\n    store: {\n      name: \"\",\n      emailuser: \"\",\n      password: \"\",\n      error: null,\n      isAuth: false,\n      proyecto: \"\",\n      descripcion: \"\",\n      autor: \"\",\n      currentUser: [],\n      profile: null\n    },\n    actions: {\n      isAuthenticated: () => {\n        //console.log(\"verificanco usuario\");\n        if (sessionStorage.getItem(\"isAuth\")) {\n          setStore({\n            isAuth: sessionStorage.getItem(\"isAuth\"),\n            currentUser: JSON.parse(sessionStorage.getItem(\"currentUser\"))\n          });\n        }\n      },\n      register: () => {\n        const {\n          name,\n          emailuser,\n          password\n        } = getStore();\n        const dataUser = {\n          name: name,\n          emailuser: emailuser,\n          password: password\n        };\n        console.log(dataUser);\n        fetch(\"http://127.0.0.1:5000/api/users/register\", {\n          method: 'POST',\n          body: JSON.stringify(dataUser)\n        }).then(resp => resp.json()).then(response => console.log(response)).catch(error => console.error(error));\n      },\n      handleChange: e => {\n        setStore({\n          [e.target.name]: e.target.value\n        });\n      },\n      handleLogin: async e => {\n        e.preventDefault();\n\n        try {\n          const {\n            name,\n            password\n          } = getStore();\n          const datos = {\n            name: name,\n            password: password\n          };\n          console.log(datos);\n          const resp = await fetch(\"http://127.0.0.1:5000/api/users/login\", {\n            method: \"POST\",\n            body: JSON.stringify(datos),\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          const infoUser = await resp.json();\n\n          if (infoUser.msg) {\n            setStore({\n              password: \"\",\n              error: infoUser.msg\n            });\n          } else {\n            setStore({\n              nombre: \"\",\n              password: \"\",\n              error: null,\n              currentUser: infoUser,\n              isAuth: true\n            });\n            sessionStorage.setItem('isAuth', true);\n            sessionStorage.setItem('currentUser', JSON.stringify(infoUser)); //history.push(\"/\");\n          }\n        } catch (error) {\n          setStore({\n            error: error.message\n          });\n        }\n      }\n    }\n  };\n};\n\nexport default getState;","map":{"version":3,"sources":["D:/ProyectosArian/Trabajo_Final_agosto/frontend/src/store/flux.js"],"names":["getState","getStore","getActions","setStore","store","name","emailuser","password","error","isAuth","proyecto","descripcion","autor","currentUser","profile","actions","isAuthenticated","sessionStorage","getItem","JSON","parse","register","dataUser","console","log","fetch","method","body","stringify","then","resp","json","response","catch","handleChange","e","target","value","handleLogin","preventDefault","datos","headers","infoUser","msg","nombre","setItem","message"],"mappings":"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","sourcesContent":["const getState = ({ getStore, getActions, setStore }) => {\r\n  return {\r\n    store: {\r\n      name: \"\",\r\n      emailuser: \"\",\r\n      password: \"\",\r\n      error: null,\r\n      isAuth: false,\r\n      proyecto: \"\",\r\n      descripcion: \"\",\r\n      autor: \"\",\r\n      currentUser: [],\r\n      profile: null,\r\n    },\r\n\r\n    actions: {\r\n      isAuthenticated: () => {\r\n        //console.log(\"verificanco usuario\");\r\n        if (sessionStorage.getItem(\"isAuth\")) {\r\n          setStore({\r\n            isAuth: sessionStorage.getItem(\"isAuth\"),\r\n            currentUser: JSON.parse(sessionStorage.getItem(\"currentUser\")),\r\n          });\r\n        }\r\n      },\r\n\r\n      register: () => {\r\n        const { name, emailuser, password } = getStore();\r\n        const dataUser={name: name, emailuser: emailuser, password: password}\r\n        console.log(dataUser)\r\n        fetch(\"http://127.0.0.1:5000/api/users/register\", {\r\n          method: 'POST',\r\n          \r\n          body: JSON.stringify(dataUser), \r\n        })\r\n          .then((resp) => resp.json())\r\n          .then((response) => console.log(response))\r\n          .catch((error) => console.error(error));\r\n      },\r\n\r\n      handleChange: (e) => {\r\n        setStore({\r\n          [e.target.name]: e.target.value,\r\n        });\r\n      },\r\n\r\n      handleLogin: async (e) => {\r\n        e.preventDefault();\r\n        try{\r\n            const { name, password } = getStore();\r\n            const datos = { name: name, password: password };\r\n            console.log(datos)\r\n            const resp = await fetch(\"http://127.0.0.1:5000/api/users/login\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify(datos),\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n            },\r\n        }); \r\n            const infoUser = await resp.json();\r\n            if (infoUser.msg) {\r\n                setStore({\r\n                password: \"\",\r\n                error: infoUser.msg,\r\n                });\r\n            } else {\r\n                setStore({\r\n                nombre: \"\",\r\n                password: \"\",\r\n                error: null,\r\n                currentUser: infoUser,\r\n                isAuth: true,\r\n                });\r\n                sessionStorage.setItem('isAuth', true);\r\n                sessionStorage.setItem('currentUser', JSON.stringify(infoUser));\r\n                //history.push(\"/\");\r\n            }\r\n        } catch (error) {\r\n        setStore({\r\n          error: error.message\r\n        });\r\n      }\r\n    }\r\n\r\n    }\r\n};\r\n};\r\n\r\nexport default getState;\r\n"]},"metadata":{},"sourceType":"module"}